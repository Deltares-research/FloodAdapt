---
title: 	Event scenario
---
The FloodAdapt calculation framework to calculate flooding and impacts for an event scenario will be described here, first for the flooding ([hazard calculation](#hazard-calculation)) and then for the [impact calculation](#impact-calculation).

The calculation framework includes the open-source, process-based compound flood model [SFINCS](https://github.com/Deltares/SFINCS) that can accurately predict compound flooding due to tide, surge, rainfall, and river discharge, at a fraction of the computation time typically required by physics-based models. It also includes the open-source flood impact assessment tool [Delft-FIAT](https://github.com/Deltares/Delft-FIAT) which rapidly calculates flood damages to individual buildings and roads. When FloodAdapt is set up in a new location, **baseline** SFINCS and Delft-FIAT models must be set up as part of that process. FloodAdapt then updates these baseline models to reflect user-defined scenarios, runs the simulations, and post-processes the output to make the evaluation of the scenario as easy as possible for the user. The FloodAdapt setup guide provides guidance for setting up these baseline models: click the links to view the [SFINCS setup guide](../_archive/setup_guide/SFINCS/index.qmd) and [Delft-FIAT setup guide](../_archive/setup_guide/Delft_Fiat/index.qmd).

## Hazard calculation
Through the use of the FloodAdapt user interface, users enter information on (1) a hydrometeorological event, (2) a projection of future conditions, and (3) a strategy composed of adaptation measures. These three 'ingredients' define an event scenario. FloodAdapt uses this information to initiate the workflow to calculate flooding and impacts for the event scenario. @fig-workflow_event_hazard zooms in on the hazard calculation portion of the FloodAdapt workflow for an event scenario. Referring to the figure can support the description of the calculation.

In FloodAdapt there is the option to include two SFINCS models - an "offshore" model and an "overland" model. The offshore model is typically a coarser model with an offshore domain adjacent to the area of interest. It is forced by astronomic tide and wind, pressure, and precipitation fields, and calculates nearshore water level time series that serve as boundary conditions for the overland model. The overland model is typically finer resolution and its domain is a hydrological area over land that includes the project area of interest. Only the overland model is strictly necessary in FloodAdapt, but some event types will not be possible without an offshore model, most notably hurricanes.

![**Hazard calculation framework for an event scenario**](../_static/images/Workflow_eventScenario_hazard.jpg){width=100% fig-align=left #fig-workflow_event_hazard}


The hydro-meteorological event is defined by an "event type". This is either (1) a historical hurricane, (2) a historical non-hurricane, or (3) a synthetic event. For a historical non-hurricane, there are further two options - (2a) the user has nearshore observed time series of coastal water levels, or (2b) the user does not have observed time series and needs to run an offshore model to generate the nearshore water level time series. Each of these four types has a unique workflow for calculating the overland flooding, which will be described in the coming paragraphs.

What is common to all the overland flooding workflows is the handling of **adaptation measures**. There are three measure types in FloodAdapt that affect the flood modeling: (1) levee or floodwall, (2) pump, and (3) urban green infrastructure. All of these choices initiate modifications to the overland SFINCS model schematization. When users specify a levee or floodwall as an adaptation measure, FloodAdapt coordinates the updating of the "weir" file in the SFINCS overland model. This file contains coordinates of linear features and their elevation, and serve to block flow in the overland model up to the specified height of the floodwall or levee. The FloodAdapt user interfaces allows users to click a polyline on a map, or import a polyline, and then uses the specifications (location and elevation) to update the weir file. When users specify a pump as (part of) an adaptation measure, FloodAdapt coordinates the updating of the "drn" (drainage) file in the SFINCS overland model. This file contains the coordinates of the intake and outfall locations and the pump capacity. When a user specifies green infrastructure as a measure, FloodAdapt coordinates the creation or updating of a storage volume input for the SFINCS overland model, based on the green infrastructure area and storage specified. SFINCS 'stores' this water volume (defined per cell) before any overland flooding takes place.

For **historical hurricanes**, the track information is pulled by the user interface from the National Hurricane Center HURDAT2 database. The first step in the workflow is to translate the track information, like maximum wind speeds and radius, into the wind, pressure, and precipitation fields needed by the offshore SFINCS model. The wind and pressure fields are generated using the [Holland 2010 method](https://journals.ametsoc.org/view/journals/mwre/138/12/2010mwr3317.1.xml) and the rainfall field is generated using the [IPET method](https://www.sciencedirect.com/science/article/abs/pii/S0022169419309904). This translation is done by an open-source python package called the Coastal Hazard Toolkit - Cyclone, or [CHT-cyclone](https://github.com/Deltares-research/cht_cyclones). The astronomic tidal boundary for the offshore SFINCS model is obtained using another CHT package called CHT-tide. If the user has specified sea level rise in their scenario future-conditions projection, that sea level rise will be added to the tidal levels. The wind, pressure, and precipitation fields and the tidal levels are then input into the offshore SFINCS model which generates time series of nearshore water levels (tide + surge). The input to the SFINCS overland model includes the simulated nearshore water level time series, the wind, pressure, and precipitation fields generated from the track, and any river discharge time series specified by the user in the user interface (when rivers are present in the site). It is also possible in FloodAdapt for a user to "turn off" the rainfall in the overland model, for example to explore the difference in flooding with and without the inclusion of rainfall. Using these inputs, the SFINCS overland model is run and the resulting maximum flood depth maps are returned. Additionally, if "observation points" have been specified when the FloodAdapt system was configured, water level time series will be saved for these locations.

For a **historical event without observed nearshore water levels**, FloodAdapt orchestrates the downloading of gridded wind, pressure, and precipitation data from the [NOAA global forecasting system](https://www.ncei.noaa.gov/products/weather-climate-models/global-forecast) reanalysis data. These data are available at a spatial resolution of 0.5 degrees for dates prior to February 2021, and 0.25 degrees after. The downloading and formatting of these data are done with the Coastal Hazard Toolkit package [CHT-meteo](https://github.com/Deltares-research/cht_meteo). If the user has specified sea level rise in their scenario future-conditions projection, that sea level rise will be added to the tidal levels. The gridded wind, pressure, and precipitation data and the tidal levels are then input into the offshore SFINCS model which generates time series of nearshore water levels. For this event type, users are able to specify rainfall, wind, and river discharge inputs for the overland flood model. These values, together with the simulated nearshore water levels are input into the overland flood model which outputs maximum flood depth maps and - if "observation points" have been specified when the FloodAdapt system was configured - water level time series will be saved for these locations.


:::{.callout-note}
## Sea level offset for offshore simulations
For hazard simulations that use the offshore SFINCS model, the nearshore water levels are returned relative to mean sea level. However, sea levels have risen since the mean sea level was set for the 1983-2001 epoch. This discrepancy results in predicted/simulated nearshore water levels that are lower than what would be observed at a tide gauge. Trend analysis can be done to determine an appropriate level of "offset" to correct mean sea level to present day conditions. This value is set in the FloodAdapt site configuration file, and can be modified by an advanced user. The offset is applied in the workflow where the future-condition sea level rise is added. This is only done for offshore events, because nearshore gauged data represent observed water levels and will already include sea level increases in the measurements. Similarly, for synthetic events, it is assumed that users will select a nearshore water level of interest, and any sea level rise of interest will be captured as a projection relative to current conditions.
:::

:::{.callout-note}
## Vertical datum references in the offshore and overland models
If there is a difference in vertical datum between the offshore and overland model, FloodAdapt automatically corrects the water level time series output from the offshore model to the datum used in the overland model prior to running the overland model.
:::

For a **historical event with observed nearshore water levels**, FloodAdapt offers the user the choice to upload their own time series data of nearshore water levels, or the user can specify a start and stop time of the event and click the 'Download water levels button' which downloads the time series data from the [NOAA](https://tidesandcurrents.noaa.gov/products.html) website. More details about this and how users can specify or import rainfall, wind, and river discharge data for the event are provided in the user manual [here](../1_user_guide/events/historic_events/historic_events_gauged.qmd). If the user has specified sea level rise in their scenario future-conditions projection, it will be added to the specified nearshore water levels at this point in the workflow prior to running the overland model. For this event type, only the SFINCS overland model needs to be run. The water level time series, rainfall, wind, and river discharge inputs are used to force the overland model, which then outputs maximum flood depth maps and - if "observation points" have been specified when the FloodAdapt system was configured - water level time series will be saved for these locations.

For a **synthetic event**, the workflow to derive the flood map and simulated water level time series at observation points is identical to the workflow for the historical event with observed nearshore water levels. It only differs in terms of the specification of the forcing data. To see more details on how users can specify synthetic events in the user manual [here](../1_user_guide/events/synthetic_events.qmd).

## Impact calculation
Once a hazard calculation is complete, FloodAdapt initiates the impact calculation, making use of the simulated flood depth map. @fig-workflow_event_impacts zooms in on the impact calculation portion of the FloodAdapt workflow for an event scenario. Referring to the figure can support the description of the calculation.

In the user interface, the user is able to specify impact-related future conditions (economic growth and/or population growth) and impact-reducing adaptation options: buyout, elevate, and floodproof. The user manual describes how a user can specify impact-related projections [here](../1_user_guide/projections/socioEconomic.qmd) and impact-reducting adaptation options [here](../1_user_guide/measures/buildings.qmd). When a scenario is created containing any of these features it initiates a modification of the baseline Delft-FIAT model.


![**Impact calculation framework for an event scenario**](../_static/images/Workflow_eventScenario_impacts.jpg){width=100% fig-align=left #fig-workflow_event_impacts}

 There are three **impact-reducing adaptation measures** in FloodAdapt that affect the impact model schematization: (1) buyouts (2) elevate, and (3) floodproof. These are all measures taken at the building level. When users specify a **buyout** measure, FloodAdapt coordinates the updating of the Delft-FIAT exposure data attributes "maximum potential damages - structure" and "maximum potential damages - content", setting them both to zero for buildings selected for buyout. This ensures that these buildings no longer accrue any damage during flood events. When users specify an **elevate** measure, FloodAdapt coordinates the updating of the Delft-FIAT exposure data attribute "finished floor height", setting it to the user-specified height. Users are able to elevate buildings to a specified height above base flood elevation (BFE) if they have included a BFE map during system setup. In this case, FloodAdapt calculates the elevation of the finished floor using the BFE and specified height above BFE, and then subtracts the ground elevation at the building location to determine the required finished floor height. The ground elevation is an attribute of the building in the Delft-FIAT exposure data (which should be aligned with the DEM used in the flood model, something that is arranged during system setup). When users specify a **floodproofing** measure, FloodAdapt coordinates the updating of the depth-damage curves for the buildings selected for floodproofing. It sets the damage fraction to zero in the depth-damage curve up to the floodpoofing height. After that height, the depth-damage curve resumes its original shape.

**Future socio-economic projections** also initiate updating of the Delft-FIAT model. Users can choose economic growth or population growth. For **population growth** there are two options: (1) the population increases in the current built area or (2) population increases in currently undeveloped areas. For the former, FloodAdapt coordinates a simplified representation by increasing the Delft-FIAT exposure data attributes "maximum potential damages - structure" and "maximum potential damages - content" by the percentage population increase specified. The idea is that the building stock density will increase, and hence also the potential damages during flood events. For population growth in currently-undeveloped areas, FloodAdapt coordinates the creation of a hybrid exposure asset with the footprint of the specified to-be-developed area. The attributes of this hybrid asset are a weighted average of the existing exposed assets, meaning the new area is assumed to reflect the make-up (in terms of building types) of the existing built area. This method was implemented to evaluate future development and assess how it will contribute to risk in the future. The method allows for users to specify the finished floor height of the new development buildings, helping to provide a foundation for ordinances on new development heights. NOTE: the "population growth in new development areas" feature is under-tested and is considered by the FloodAdapt development team to be in need of improvements before it reaches its potential. When users enter a percentage for **economic growth**, FloodAdapt coordinates a simplified representation by increasing the Delft-FIAT exposure data attributes "maximum potential damages - structure" and "maximum potential damages - content" by the percentage economic growth specified.

Once the Delft-FIAT model schematization has been updated, FloodAdapt coordinates the running of Delft-FIAT with the simulated flood depth map from the hazard calculation. The calculation method of Delft-FIAT follows a standard approach and is described in the [Delft-FIAT github documentation](https://github.com/Deltares/Delft-FIAT){.external link-external-newwindow=true} and in the [Delft-FIAT setup documentation](../_archive/setup_guide/Delft_Fiat/index.qmd). @fig-DF_overview2 shows conceptually how Delft-FIAT calculates damages. Note that no indirect damages are calculated with Delft-FIAT, only direct damages to assets in the exposure dataset.

![Overview of the calculation method in Delft-FIAT](../_static/images/DelftFIAT_overview.png){width=75% fig-align=left #fig-DF_overview2}

The impact calculation returns inundation depths and economic damages for every asset in the Delft-FIAT model. These results are passed through a [post-processing toolkit](https://github.com/Deltares/fiat_toolbox). This aggregates the damages to aggregation levels specified during system setup, creates vector files of impacts, and generates the FloodAdapt infographic and metrics.

To read more about the output from an event scenario calculation, please see the user manual section on Output [here](../1_user_guide/output/index.qmd).
